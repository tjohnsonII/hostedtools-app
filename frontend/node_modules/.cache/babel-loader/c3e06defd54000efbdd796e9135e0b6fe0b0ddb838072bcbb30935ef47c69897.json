{"ast":null,"code":"import React,{useState}from'react';import'../css/navigationbar.css';// You need to install papaparse: npm install papaparse\nimport Papa from'papaparse';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const defaultColumns=['Bill:','Row','Device ID','DirectoryName','CID/911CID','Site Code','WebOrder','Attendent','D60','Attrib Count','ASSET ID','MAC','Make','Model','ADD|CSV'];const VPBXImport=()=>{const[columns,setColumns]=useState(defaultColumns);const[rows,setRows]=useState([Object.fromEntries(defaultColumns.map(col=>[col,'']))]);// Handle file upload and parse\nconst handleFileUpload=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(!file)return;Papa.parse(file,{header:true,skipEmptyLines:true,complete:result=>{const data=result.data;if(data.length>0){setColumns(Object.keys(data[0]));setRows(data);}}});};// Handle cell edit\nconst handleCellChange=(rowIdx,col,value)=>{const updatedRows=rows.map((row,idx)=>idx===rowIdx?{...row,[col]:value}:row);setRows(updatedRows);};// Add/remove row\nconst addRow=()=>setRows([...rows,Object.fromEntries(columns.map(c=>[c,'']))]);const removeRow=idx=>setRows(rows.filter((_,i)=>i!==idx));return/*#__PURE__*/_jsxs(\"div\",{className:\"vpbx-import\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"VPBX Import\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"vpbx-file-upload\",children:\"Upload CSV file:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"vpbx-file-upload\",type:\"file\",accept:\".csv\",onChange:handleFileUpload,title:\"Upload VPBX import CSV\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"vpbx-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[columns.map(col=>/*#__PURE__*/_jsx(\"th\",{children:col},col)),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:rows.map((row,rowIdx)=>/*#__PURE__*/_jsxs(\"tr\",{children:[columns.map(col=>/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:row[col]||'',onChange:e=>handleCellChange(rowIdx,col,e.target.value),placeholder:col,title:col})},col)),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeRow(rowIdx),disabled:rows.length===1,children:\"-\"})})]},rowIdx))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addRow,children:\"Add Row\"})]});};export default VPBXImport;","map":{"version":3,"names":["React","useState","Papa","jsx","_jsx","jsxs","_jsxs","defaultColumns","VPBXImport","columns","setColumns","rows","setRows","Object","fromEntries","map","col","handleFileUpload","e","_e$target$files","file","target","files","parse","header","skipEmptyLines","complete","result","data","length","keys","handleCellChange","rowIdx","value","updatedRows","row","idx","addRow","c","removeRow","filter","_","i","className","children","htmlFor","id","type","accept","onChange","title","placeholder","onClick","disabled"],"sources":["/home/tim2/hostedtools-app/frontend/src/pages/VPBXImport.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport '../css/navigationbar.css';\n// You need to install papaparse: npm install papaparse\nimport Papa from 'papaparse';\n\nconst defaultColumns = [\n  'Bill:', 'Row', 'Device ID', 'DirectoryName', 'CID/911CID', 'Site Code', 'WebOrder', 'Attendent', 'D60', 'Attrib Count', 'ASSET ID', 'MAC', 'Make', 'Model', 'ADD|CSV'\n];\n\nconst VPBXImport: React.FC = () => {\n  const [columns, setColumns] = useState<string[]>(defaultColumns);\n  const [rows, setRows] = useState<Array<Record<string, string>>>([\n    Object.fromEntries(defaultColumns.map(col => [col, ''])),\n  ]);\n\n  // Handle file upload and parse\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    Papa.parse(file, {\n      header: true,\n      skipEmptyLines: true,\n      complete: (result: Papa.ParseResult<Record<string, string>>) => {\n        const data = result.data;\n        if (data.length > 0) {\n          setColumns(Object.keys(data[0]));\n          setRows(data);\n        }\n      },\n    });\n  };\n\n  // Handle cell edit\n  const handleCellChange = (rowIdx: number, col: string, value: string) => {\n    const updatedRows = rows.map((row, idx) =>\n      idx === rowIdx ? { ...row, [col]: value } : row\n    );\n    setRows(updatedRows);\n  };\n\n  // Add/remove row\n  const addRow = () => setRows([...rows, Object.fromEntries(columns.map(c => [c, '']))]);\n  const removeRow = (idx: number) => setRows(rows.filter((_, i) => i !== idx));\n\n  return (\n    <div className=\"vpbx-import\">\n      <h2>VPBX Import</h2>\n      <label htmlFor=\"vpbx-file-upload\">Upload CSV file:</label>\n      <input\n        id=\"vpbx-file-upload\"\n        type=\"file\"\n        accept=\".csv\"\n        onChange={handleFileUpload}\n        title=\"Upload VPBX import CSV\"\n      />\n      <table className=\"vpbx-table\">\n        <thead>\n          <tr>\n            {columns.map(col => <th key={col}>{col}</th>)}\n            <th>Action</th>\n          </tr>\n        </thead>\n        <tbody>\n          {rows.map((row, rowIdx) => (\n            <tr key={rowIdx}>\n              {columns.map(col => (\n                <td key={col}>\n                  <input\n                    type=\"text\"\n                    value={row[col] || ''}\n                    onChange={e => handleCellChange(rowIdx, col, e.target.value)}\n                    placeholder={col}\n                    title={col}\n                  />\n                </td>\n              ))}\n              <td>\n                <button onClick={() => removeRow(rowIdx)} disabled={rows.length === 1}>-</button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n      <button onClick={addRow}>Add Row</button>\n    </div>\n  );\n};\n\nexport default VPBXImport;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}